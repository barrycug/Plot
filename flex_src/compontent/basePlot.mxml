<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml"
		   xmlns:draw="com.esrichina.tm.plot.*"
		   width="260"
		   height="195"
		   backgroundColor="#004A7B"
		   color="#9CD8FF"
		   borderStyle="solid"
		   cornerRadius="8"
		   borderColor="#35A1D1">
	<mx:TabNavigator x="6"
					 y="40"
					 id="tn"
					 width="246.5"
					 height="142"
					 fontSize="12"
					 borderColor="#35A1D1">
		<mx:Canvas label="旗 标"
				   width="100%"
				   height="100%"
				   backgroundColor="#004A7B"
				   fontWeight="normal"
				   color="#8CD2FF">
			<mx:Grid x="13"
					 y="11"
					 width="226.5"
					 height="92">
				<mx:GridRow width="100%"
							height="100%">
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/symbol/triangleflag_up.png"
								  id="triangleflag"
								  mouseDown="active(event)"/>
					</mx:GridItem>
					<mx:GridItem width="46"
								 height="44">
						<mx:Image source="images/symbol/rectflag_up.png"
								  id="rectflag"
								  mouseDown="active(event)"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/symbol/curveflag_up.png"
								  id="curveflag"
								  mouseDown="active(event)"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/assets/building.png"/>
					</mx:GridItem>
					<mx:GridItem width="46"
								 height="44">
						<mx:Image source="images/assets/building.png"/>
					</mx:GridItem>
				</mx:GridRow>
				<mx:GridRow width="100%"
							height="100%">
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/assets/building.png"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/assets/building.png"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/assets/building.png"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/assets/building.png"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/assets/building.png"/>
					</mx:GridItem>
				</mx:GridRow>
			</mx:Grid>
		</mx:Canvas>
		<mx:Canvas label="线 标"
				   width="100%"
				   height="100%"
				   color="#8CD2FF">
			<mx:Grid x="13"
					 y="11"
					 width="226.5"
					 height="92">
				<mx:GridRow width="100%"
							height="100%">
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/symbol/base_up.png"
								  id="base"
								  ioError="occur(event)"
								  click="active(event)"/>
					</mx:GridItem>
					<mx:GridItem width="46"
								 height="44">
						<mx:Image source="images/symbol/circle_up.png"
								  id="circle"
								  click="active(event)"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image id="moon"
								  source="images/symbol/moon_up.png"
								  click="active(event)"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image id="halve"
								  click="active(event)"
								  source="images/symbol/halve_up.png"/>
					</mx:GridItem>
					<mx:GridItem width="46"
								 height="44">
						<mx:Image id="halve1"
								  click="active(event)"
								  source="images/symbol/halve1_up.png"/>
					</mx:GridItem>
				</mx:GridRow>
				<mx:GridRow width="100%"
							height="100%">
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image id="ellipse"
								  source="images/symbol/ellipse_up.png"
								  click="active(event)"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image id="rectangle"
								  source="images/symbol/rectangle_up.png"
								  click="active(event)"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image id="arc"
								  mouseDown="active(event)"
								  ioError="occur(event)"
								  source="images/symbol/arc_up.png"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/assets/building.png"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/assets/building.png"/>
					</mx:GridItem>
				</mx:GridRow>
			</mx:Grid>
		</mx:Canvas>
		<mx:Canvas label="箭 标"
				   width="245"
				   height="200"
				   color="#8CD2FF">
			<mx:Grid x="13"
					 y="11"
					 width="226.5"
					 height="92">
				<mx:GridRow width="100%"
							height="100%">
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/symbol/sarrow_up.png"
								  id="sarrow"
								  mouseDown="active(event)"/>
					</mx:GridItem>
					<mx:GridItem width="46"
								 height="44">
						<mx:Image id="equalsarrow"
								  mouseDown="active(event)"
								  source="images/symbol/equalsarrow_up.png"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image id="doublesarrow"
								  mouseDown="active(event)"
								  source="images/symbol/doublesarrow_up.png"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/symbol/xarrows_up.png"
								  id="xarrows"
								  mouseDown="active(event)"/>
					</mx:GridItem>
					<mx:GridItem width="46"
								 height="44">
						<mx:Image source="images/symbol/lsarrow_up.png"
								  id="lsarrow"
								  ioError="occur(event)"
								  mouseDown="active(event)"/>
					</mx:GridItem>
				</mx:GridRow>
				<mx:GridRow width="100%"
							height="100%">
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image id="tailsarrow"
								  mouseDown="active(event)"
								  source="images/symbol/tailsarrow_up.png"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/assets/building.png"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/assets/building.png"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/assets/building.png"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/assets/building.png"/>
					</mx:GridItem>
				</mx:GridRow>
			</mx:Grid>
		</mx:Canvas>
		<mx:Canvas label="其 他"
				   width="245"
				   height="100%"
				   color="#8CD2FF">
			<mx:Grid x="13"
					 y="11"
					 width="226.5"
					 height="92">
				<mx:GridRow width="100%"
							height="100%">
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/symbol/other1_up.png"/>
					</mx:GridItem>
					<mx:GridItem width="46"
								 height="44">
						<mx:Image source="images/symbol/highlight_up.png"
								  id="highlight"
								  mouseDown="active(event)"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image id="propedit"
								  source="images/symbol/propedit_up.png"
								  mouseDown="active(event)"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/assets/building.png"/>
					</mx:GridItem>
					<mx:GridItem width="46"
								 height="44">
						<mx:Image source="images/assets/building.png"/>
					</mx:GridItem>
				</mx:GridRow>
				<mx:GridRow width="100%"
							height="100%">
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/assets/building.png"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/assets/building.png"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/assets/building.png"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/assets/building.png"/>
					</mx:GridItem>
					<mx:GridItem width="100%"
								 height="100%">
						<mx:Image source="images/assets/building.png"/>
					</mx:GridItem>
				</mx:GridRow>
			</mx:Grid>
		</mx:Canvas>
	</mx:TabNavigator>
	<mx:Label x="7"
			  y="8"
			  text="基本标绘"
			  width="79"
			  height="20"
			  fontSize="12"
			  color="#FFD800"/>
	<mx:Button x="227.5"
			   y="3"
			   fontSize="16"
			   width="28"
			   height="22"
			   styleName="close"
			   fontFamily="Verdana"
			   click="close()"/>
	<mx:Script>
		<![CDATA[
			import com.esrichina.tm.edit.DragDisplayObject;
			import com.esrichina.tm.plot.DynamicPlot;
			import mx.controls.Alert;
			import com.esri.ags.layers.GraphicsLayer;
			import mx.messaging.messages.IMessage;
			import mx.messaging.messages.AsyncMessage;
			import com.esrichina.tm.utils.SerializeClass;

			private function close():void
			{
				for (var i:int=0; i < main.numChildren; i++)
				{
					if (main.getChildAt(i) is basePlot)
					{
						main.removeChildAt(i);
						main.isplot=false;
						break;
					}
				}
			}

			private function active(event:MouseEvent):void
			{
				var drawtool:DynamicPlot=main.drawtool;
				main.navigationtool.deactivate();
				changeSource(event.currentTarget as Image);
				main.choosetool.visible=false;
				var grap:String=event.currentTarget.id.toString();
				if (grap == "propedit")
				{
					main.choosetool.visible=true;
					DragDisplayObject.clearDrag();
					DragDisplayObject.getDragObjectInstance(main.esrimap, main.choosetool);
				}
				drawtool.activate(grap.toLocaleUpperCase());

			}

			private function changeSource(image:Image):void
			{
				var images:Array=new Array();
				switch (tn.selectedIndex)
				{
					case 0:
					{
						images.push(triangleflag);
						images.push(rectflag);
						images.push(curveflag);
						break;
					}
					case 1:
					{
						images.push(base);
						images.push(circle);
						images.push(moon);
						images.push(halve);
						images.push(halve1);
						images.push(ellipse);
						images.push(rectangle);
						images.push(arc);
						break;
					}
					case 2:
					{
						images.push(sarrow);
						images.push(xarrows);
						images.push(lsarrow);
						images.push(equalsarrow);
						images.push(doublesarrow);
						images.push(tailsarrow);
						break;
					}
					case 3:
					{
						images.push(highlight);
						images.push(propedit);
						break;
					}
				}
				var n:int=images.length;
				var pic:String;
				for (var i:int=0; i < n; i++)
				{
					if (null == images[i])
						continue;
					pic=images[i].id;
					if (images[i] != image)
					{
						(images[i] as Image).source="images/symbol/" + pic + "_up.png";
					}
					else
					{
						(images[i] as Image).source="images/symbol/" + pic + "_over.png";
					}

				}
			}

			private function occur(event:IOErrorEvent):void
			{
				var obj:Image=event.currentTarget as Image;
				obj.autoLoad=true;
				obj.source="images/assets/" + obj.id + "_up.png";
			}
			public var main:Main;
		]]>
	</mx:Script>
</mx:Canvas>
